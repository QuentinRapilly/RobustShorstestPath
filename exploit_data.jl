using Plots 

function exploit_csv(filename::String, nb_samples_took_into_account::Int, max_time::Int)
    f = open(filename)
    readline(f)

    methods = ["Plans coupants" "Dualisation" "Branch and cut"]# "Heuristique"]
    curves = zeros(Float64,max_time,size(methods,2))

    for i in 1:nb_samples_took_into_account
        line = readline(f)
        splited_line = split(line,",")
        for (id,method) in enumerate(methods)
            ind = ceil(Int,parse(Float64,splited_line[2+(id-1)*3]))
            if ind < max_time
                curves[:,id] = curves[:,id] + [zeros(ind) ; ones(max_time-ind)]
            end
        end

    end

    close(f)
    t = [i for i in 1:max_time]
    pyplot()
    p = plot(t,curves/nb_samples_took_into_account, title = "Comparaison des methodes", label = methods, xlabel = "Temps(s)", ylabel = "Proportion d'instances resolues")
    savefig(p, "plots/comparaison.png")


end

exploit_csv("res/output.csv",9,180)

    

        

